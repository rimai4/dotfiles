set icons true
set drawbox
set hidden true
set ignorecase true
set incfilter true
set previewer ~/.config/lf/pv.sh
map i $~/.config/lf/pv.sh $f | less -RX

# Commands
cmd delete ${{
  clear
  echo "Delete the following files? [N/y]"
  echo
  echo $fx
  read ans
  [ "$ans" = "y" ] && rm -rf $fx
}}

cmd mkdir %mkdir "$@"
cmd touch %touch "$@"

cmd batch_rename ${{
  if [ -n "$fs" ]; then
    fs="$(basename -a $fs)"
  else
    fs="$(ls)"
  fi
  qmv -f do $fs
}}

cmd fzf_directory ${{
    res="$(fd -t d | fzf --reverse --header='Jump to directory' | sed 's/\\/\\\\/g;s/"/\\"/g')"
    if [ -d "$res" ] ; then
        cmd="cd"
    else
        exit 0
    fi
    lf -remote "send $id $cmd \"$res\""
}}

cmd fzf_file ${{
    res="$(fd -t f | fzf --reverse --header='Jump to file' | sed 's/\\/\\\\/g;s/"/\\"/g')"
    if [ -f "$res" ] ; then
        cmd="select"
    else
        exit 0
    fi
    lf -remote "send $id $cmd \"$res\""
}}

cmd fzf_directory ${{
    res="$(fd -t d | fzf --reverse --header='Jump to directory' | sed 's/\\/\\\\/g;s/"/\\"/g')"
    if [ -d "$res" ] ; then
        cmd="cd"
    else
        exit 0
    fi
    lf -remote "send $id $cmd \"$res\""
}}

# Remove default bindings
map m
map d
map f
map r

# Renaming
map A rename
map r push A<a-b><a-b><a-f>
map R batch_rename

# Filtering
map fi filter
map F setfilter

# Nested file/directory search
map ff fzf_file
map fd fzf_directory

# Create file/directory
map mf push %touch<space>
map md push %mkdir<space>

# Cut/clear/delete
map x cut
map C clear
map D delete

# Cd shortcuts
map gd cd ~/Desktop
map gD cd ~/Downloads
map gc cd ~/.config
map gl cd ~/.config/lf
map gf cd ~/.config/fish
map gp cd ~/projects
map gh cd ~

# Move half page up/down
map J half-down
map K half-up

